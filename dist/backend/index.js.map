{"version":3,"sources":["index.ts"],"names":["service","onServerStarted","bp","TwilioService","initialize","err","logger","attachError","warn","onBotMount","botId","mountBot","onBotUnmount","unmountBot","onModuleUnmount","events","removeMiddleware","http","deleteRouterForBot","entryPoint","definition","name","noInterface","fullName"],"mappings":";;;;;;;AAAA;;AAGA;;AAEA,IAAIA,OAAJ;;AAEA,MAAMC,eAAe,GAAG,MAAOC,EAAP,IAA0B;AAChDF,EAAAA,OAAO,GAAG,IAAIG,qBAAJ,CAAkBD,EAAlB,CAAV;;AACA,MAAI;AACF,UAAMF,OAAO,CAACI,UAAR,EAAN;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZH,IAAAA,EAAE,CAACI,MAAH,CAAUC,WAAV,CAAsBF,GAAtB,EAA2BG,IAA3B,CAAgC,uBAAhC;AACD;AACF,CAPD;;AASA,MAAMC,UAAU,GAAG,OAAOP,EAAP,EAAuBQ,KAAvB,KAAyC;AAC1D,QAAMV,OAAO,CAACW,QAAR,CAAiBD,KAAjB,CAAN;AACD,CAFD;;AAIA,MAAME,YAAY,GAAG,OAAOV,EAAP,EAAuBQ,KAAvB,KAAyC;AAC5D,QAAMV,OAAO,CAACa,UAAR,CAAmBH,KAAnB,CAAN;AACD,CAFD;;AAIA,MAAMI,eAAe,GAAG,MAAOZ,EAAP,IAA0B;AAChDA,EAAAA,EAAE,CAACa,MAAH,CAAUC,gBAAV,CAA2B,qBAA3B;AACAd,EAAAA,EAAE,CAACe,IAAH,CAAQC,kBAAR,CAA2B,gBAA3B;AACD,CAHD;;AAKA,MAAMC,UAAgC,GAAG;AACvClB,EAAAA,eADuC;AAEvCQ,EAAAA,UAFuC;AAGvCG,EAAAA,YAHuC;AAIvCE,EAAAA,eAJuC;AAKvCM,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE,gBADI;AAEVC,IAAAA,WAAW,EAAE,IAFH;AAGVC,IAAAA,QAAQ,EAAE;AAHA;AAL2B,CAAzC;eAYeJ,U","sourceRoot":"/Applications/MAMP/htdocs/botpress-master/modules/channel-twilio/src/backend","sourcesContent":["import 'bluebird-global'\nimport * as sdk from 'botpress/sdk'\n\nimport { TwilioService } from './twilio'\n\nlet service: TwilioService\n\nconst onServerStarted = async (bp: typeof sdk) => {\n  service = new TwilioService(bp)\n  try {\n    await service.initialize()\n  } catch (err) {\n    bp.logger.attachError(err).warn('Channel misconfigured')\n  }\n}\n\nconst onBotMount = async (bp: typeof sdk, botId: string) => {\n  await service.mountBot(botId)\n}\n\nconst onBotUnmount = async (bp: typeof sdk, botId: string) => {\n  await service.unmountBot(botId)\n}\n\nconst onModuleUnmount = async (bp: typeof sdk) => {\n  bp.events.removeMiddleware('twilio.sendMessages')\n  bp.http.deleteRouterForBot('channel-twilio')\n}\n\nconst entryPoint: sdk.ModuleEntryPoint = {\n  onServerStarted,\n  onBotMount,\n  onBotUnmount,\n  onModuleUnmount,\n  definition: {\n    name: 'channel-twilio',\n    noInterface: true,\n    fullName: 'Twilio Channel'\n  }\n}\n\nexport default entryPoint\n"]}